<section class="hero">
  <style>
    /* ---------- Container & glass card ---------- */
    .glass-form {
      max-width: 900px;
      margin: 30px auto;
      padding: 22px;
      border-radius: 14px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 8px 30px rgba(0,0,0,0.35);
      color: #e8eef6;
    }

    /* ---------- Header flex ---------- */
    .profile-header {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-bottom: 18px;
    }

    .profile-avatar {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      background: rgba(255,255,255,0.06);
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      flex-shrink: 0;
    }

    .profile-main {
      flex: 1;
    }

    .profile-actions {
      margin-top: 10px;
    }

    .btn-submit, .btn {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      color: inherit;
      border: 1px solid rgba(255,255,255,0.04);
      background: rgba(255,255,255,0.03);
      cursor: pointer;
      transition: all .14s ease;
      font-weight: 600;
    }

    .btn-submit:hover, .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.14);
    }

    /* ---------- Stats ---------- */
    .profile-stats {
      text-align: right;
      min-width: 140px;
      flex-shrink: 0;
    }

    .profile-stats .small {
      font-size: 14px;
      color: #999;
    }

    .profile-stats .big {
      font-size: 22px;
      font-weight: 600;
      margin-top: 6px;
    }

    /* ---------- Reports list ---------- */
    .reports-grid {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .report-card {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      padding: 12px;
      border-radius: 10px;
      background: rgba(255,255,255,0.02);
      transition: all .12s ease;
      overflow: hidden;
    }

    .report-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }

    .report-thumb {
      width: 84px;
      height: 84px;
      border-radius: 8px;
      overflow: hidden;
      flex: 0 0 84px;
      background: #111;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .report-thumb img {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .report-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .report-top {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }

    .report-title { font-weight:600; }
    .report-location { opacity:0.8; font-size:13px; }

    .report-status {
      text-align:right;
    }

    .report-desc {
      margin: 10px 0 8px 0;
      color: #cfcfcf;
      max-height:44px;
      overflow:hidden;
    }

    .report-actions {
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }

    .delete-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px 8px;
      color: #ff6363;
      font-size: 18px;
      border-radius: 6px;
    }
    .delete-btn:hover { color:#ff3b3b; transform: translateY(-1px); }

    /* ---------- Small screens ---------- */
    @media (max-width: 768px) {
      .glass-form { padding: 18px; }
      .profile-header { flex-direction: column; align-items: center; gap:12px; }
      .profile-actions{display: flex; flex-direction: column; gap: 10px;}
      .profile-stats { text-align:center; min-width: auto; width:100%; }
      .report-card { flex-direction: column; }
      .report-thumb { width:100%; height:180px; flex: none; border-radius:10px; }
      .report-actions { justify-content: space-between; width:100%; margin-top:6px; }
      .btn-submit, .btn { width: auto; }
    }

    @media (max-width: 480px) {
      .profile-avatar { width:72px; height:72px; font-size:34px; }
      .profile-actions{display: flex; flex-direction: column; gap: 10px;}
      .report-thumb { height:160px; }
      .report-desc { max-height:60px; }
      .delete-btn { font-size:16px; padding:6px; }
    }
  </style>

  <div class="glass-form">
    <!-- Profile header -->
    <div class="profile-header">
      <!-- Random emoji avatar -->
      <div class="profile-avatar">
        <% 
          const emojis = ["ðŸ˜€","ðŸ˜Ž","ðŸ¦Š","ðŸ¼","ðŸ¥","ðŸ¦","ðŸ¯","ðŸŒŸ","ðŸ€","ðŸŒˆ","ðŸš€","ðŸŽ¯","ðŸŽ’"];
          function emojiFor(s) {
            if(!s) return emojis[0];
            let h = 0;
            for(let i=0;i<s.length;i++) h = (h<<5) - h + s.charCodeAt(i);
            return emojis[Math.abs(h) % emojis.length];
          }
        %>
        <%= emojiFor(user && user.email ? user.email : '') %>
      </div>

      <div class="profile-main">
        <h2 style="margin:0 0 6px 0;"><%= user ? user.fullName : 'Unknown User' %></h2>
        <p style="margin:0; opacity:0.8;"><i class="fa-solid fa-envelope me-2"></i> <%= user ? user.email : '' %></p>
        <div class="profile-actions">
          <a href="/dashboard" class="btn btn-submit" style="display:inline-block; margin-right:8px;"><i class="fa-solid fa-house me-2"></i>Dashboard</a>
          <a href="/profile/edit" class="btn btn-submit" style="display:inline-block; opacity:0.9;"><i class="fa-solid fa-pen me-2"></i>Edit Profile</a>
        </div>
      </div>

      <!-- small stats -->
      <div class="profile-stats">
        <div class="small">Total Reports</div>
        <div class="big"><%= reports ? reports.length : 0 %></div>
      </div>
    </div>

    <hr style="opacity:0.06; margin: 12px 0 20px 0;">

    <!-- Reports list -->
    <h4 style="margin-bottom:12px;">Your Reports</h4>

    <% if (!reports || reports.length === 0) { %>
      <p style="opacity:0.85;">You haven't posted any reports yet. Try <a href="/report-lost">reporting a lost item</a> or <a href="/report-found">reporting a found item</a>.</p>
    <% } else { %>
      <div class="reports-grid">
        <% reports.forEach(r => { %>
          <div class="report-card">
            <div class="report-thumb">
              <% if (r.imageUrl) { %>
                <img src="<%= r.imageUrl %>" alt="item">
              <% } else { %>
                <div style="color:#888;">No Image</div>
              <% } %>
            </div>

            <div class="report-body">
              <div class="report-top">
                <div>
                  <div class="report-title"><%= r.category ? r.category.charAt(0).toUpperCase() + r.category.slice(1) : 'Item' %></div>
                  <div class="report-location"><%= r.location || '' %></div>
                </div>

                <div class="report-status">
                  <div style="font-size:13px; color: <%= r.status === 'FOUND' ? '#0ea5a4' : '#f97316' %>;">
                    <strong><%= r.status %></strong>
                  </div>
                  <div style="font-size:12px; opacity:0.7; margin-top:6px;"><%= new Date(r.date || r.createdAt).toLocaleDateString() %></div>
                </div>
              </div>

              <div class="report-desc"><%= r.description ? (r.description.length > 120 ? r.description.slice(0,120) + '...' : r.description) : 'No description' %></div>

              <div class="report-actions">
                <a href="/items/<%= r._id %>" class="btn" style="padding:6px 10px; border-radius:8px; background:rgba(255,255,255,0.562); text-decoration:none;">View</a>

                <% if (currentUser && r.postedBy && (r.postedBy.toString() === currentUser._id.toString())) { %>
                  <form action="/reports/<%= r._id %>/delete" method="POST" style="display:inline;">
                    <button type="submit" class="delete-btn" title="Delete report" onclick="return confirm('Are you sure you want to delete this report?');">
                      <i class="fa-solid fa-trash"></i>
                    </button>
                  </form>
                <% } %>

                <span style="font-size:13px; opacity:0.8;">Posted: <%= new Date(r.createdAt).toLocaleString() %></span>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</section>
